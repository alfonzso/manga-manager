(function(){"use strict";var e={8356:function(e,n,a){var r=a(9242),t=a(3396);function i(e,n,a,r,i,o){const s=(0,t.up)("MangaManager");return(0,t.wg)(),(0,t.j4)(s)}const o={class:"mangaBox"};function s(e,n,a,r,i,s){const l=(0,t.up)("AuthPage"),d=(0,t.up)("MangaBox"),u=(0,t.up)("HiddenMangas"),g=(0,t.up)("ErrorPage"),m=(0,t.up)("AdminPage");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("a",{href:"#",onClick:n[0]||(n[0]=e=>s.yourlink())},"Open all mangas"),(0,t.Wm)(l,{isUserLoggedIn:i.isUserLoggedIn},null,8,["isUserLoggedIn"]),(0,t._)("div",o,[(0,t.Wm)(d,{orderedNotHiddenMangas:s.orderedNotHiddenMangas,loading:i.loading},null,8,["orderedNotHiddenMangas","loading"]),(0,t.Wm)(u,{hiddenMangas:s.hiddenMangas},null,8,["hiddenMangas"]),(0,t.Wm)(g,{error:i.err,errors:i.errors},null,8,["error","errors"])]),(0,t.Wm)(m,{adminMangas:s.orderedMangas},null,8,["adminMangas"])],64)}function l(e,n,a){return fetch(e,{method:n,body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((e=>e.ok?e.json().catch((()=>{})):Promise.reject({status:e.status,statusText:e.statusText,method:n,url:e.url})))}var d=a(7139);const u={id:"auth"},g=(0,t._)("input",{type:"submit",value:"Log In"},null,-1),m={key:2,class:"box error-box"},h=(0,t._)("b",null,"Please correct the following error(s):",-1);function c(e,n,a,i,o,s){return(0,t.wg)(),(0,t.iD)("div",u,[a.isUserLoggedIn?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("form",{key:0,onSubmit:n[2]||(n[2]=(...e)=>s.login&&s.login(...e)),method:"post"},[(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>o.email=e),type:"email",name:"email",id:"email"},null,512),[[r.nr,o.email]]),(0,t.wy)((0,t._)("input",{"onUpdate:modelValue":n[1]||(n[1]=e=>o.password=e),type:"password",name:"password",id:"password"},null,512),[[r.nr,o.password]]),g],32)),a.isUserLoggedIn?((0,t.wg)(),(0,t.iD)("button",{key:1,type:"submit",class:"btn btn-success",onClick:n[3]||(n[3]=e=>s.logout(e))},"LogOut")):(0,t.kq)("",!0),o.errors.length?((0,t.wg)(),(0,t.iD)("div",m,[(0,t._)("p",null,[h,(0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.errors,(e=>((0,t.wg)(),(0,t.iD)("li",{key:e.id},(0,d.zw)(e),1)))),128))])])])):(0,t.kq)("",!0)])}var p={name:"AuthPage",props:["isUserLoggedIn"],data(){return{errors:[],email:null,password:null}},methods:{login:function(e){e&&e.preventDefault(),this.errors=[],this.email||this.errors.push("email required."),this.password||this.errors.push("password required."),l("/auth/login","POST",{email:this.email,password:this.password}).then((()=>{location.reload()})).catch((e=>this.error=e))},logout:function(e){e&&e.preventDefault(),l("/auth/logout","POST").then((()=>{location.reload()})).catch((e=>{this.error=e}))}}},f=a(89);const M=(0,f.Z)(p,[["render",c]]);var w=M;const v=(0,t._)("h1",null,"Manga Manager",-1),y={class:"row"},b={class:"star",style:{padding:"1px"}},_={key:0,class:"loader"},k=(0,t._)("div",{class:"url"},null,-1),N=(0,t._)("div",{class:"pageNum"},null,-1),U=(0,t._)("div",{class:"hideManga"},null,-1),T={class:"star"},x=["href"],O={class:"url"},D={class:"pageNum"},P=["onChange","onUpdate:modelValue"],H={class:"hideManga"},C=["onClick"],q=(0,t._)("input",{type:"submit",value:"Submit"},null,-1);function L(e,n,a,i,o,s){return(0,t.wg)(),(0,t.iD)(t.HY,null,[v,(0,t._)("div",y,[(0,t._)("div",b,[a.loading?((0,t.wg)(),(0,t.iD)("div",_)):(0,t.kq)("",!0)]),k,N,U]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.orderedNotHiddenMangas,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"row",key:e.id},[(0,t._)("div",T,[(0,t._)("a",{href:e.editedUrl,style:(0,d.j5)([{"text-decoration":"none"},e.hasNext?"background-color: greenyellow;":""]),target:"_blank"}," * ",12,x)]),(0,t._)("div",O,(0,d.zw)(e.name),1),(0,t._)("div",D,[(0,t.wy)((0,t._)("input",{type:"number",min:"0",onChange:n=>s.modifyMangaPageNumber(e,n),"onUpdate:modelValue":n=>e.pageNum=n},null,40,P),[[r.nr,e.pageNum]])]),(0,t._)("div",H,[(0,t._)("input",{type:"checkbox",onClick:n=>s.hideManga(e,n)},null,8,C)])])))),128)),(0,t._)("form",{class:"row submitForm",onSubmit:n[2]||(n[2]=e=>s.addNewManga(e)),method:"post"},[(0,t.wy)((0,t._)("input",{class:"mangaName","onUpdate:modelValue":n[0]||(n[0]=e=>o.mangaName=e),type:"text",name:"mangaName",placeholder:"Type a manga name"},null,512),[[r.nr,o.mangaName]]),(0,t.wy)((0,t._)("input",{class:"mangaUrl","onUpdate:modelValue":n[1]||(n[1]=e=>o.mangaUrl=e),type:"text",name:"mangaUrl",placeholder:"Type a manga url"},null,512),[[r.nr,o.mangaUrl]]),q],32)],64)}var j={name:"MangaBox",props:["orderedNotHiddenMangas","loading"],data(){return{mangaName:"",mangaUrl:""}},methods:{modifyMangaPageNumber(e,n){this.emitter.emit("modify-manga-page-number",e,n)},hideManga(e,n){this.emitter.emit("hide-manga",e,n)},addNewManga(e){this.emitter.emit("add-new-manga",e)}}};const E=(0,f.Z)(j,[["render",L]]);var V=E;const A=(0,t._)("div",{class:"star"}," * ",-1),S={class:"url"},I=(0,t._)("div",{class:"spacer"},null,-1),Y={class:"pageNum"},z=["value"],Z={class:"checkbox-wrapper"},B=["onClick"];function K(e,n,a,i,o,s){return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("button",{onClick:n[0]||(n[0]=e=>o.hiddenToggle=!o.hiddenToggle)}," Hidden Mangas "),(0,t.wy)((0,t._)("div",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.hiddenMangas,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"row",key:e.id},[A,(0,t._)("div",S,(0,d.zw)(e.name),1),I,(0,t._)("div",Y,[(0,t._)("input",{type:"number",min:"0",value:e.pageNum},null,8,z)]),(0,t._)("div",Z,[(0,t._)("input",{type:"checkbox",onClick:n=>s.hideManga(e,n)},null,8,B)])])))),128))],512),[[r.F8,o.hiddenToggle]])],64)}var W={name:"HiddenMangas",props:["hiddenMangas"],data(){return{hiddenToggle:!1}},methods:{hideManga(e,n){this.emitter.emit("hide-manga",e,n)}}};const F=(0,f.Z)(W,[["render",K]]);var R=F;const $={class:"adminBox"},G=["onChange"],J=["onUpdate:modelValue"],X=["onUpdate:modelValue"],Q=["onUpdate:modelValue"],ee=["onClick"];function ne(e,n,a,i,o,s){return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("button",{onClick:n[0]||(n[0]=e=>o.adminToggle=!o.adminToggle)}," Admin "),(0,t.wy)((0,t._)("div",$,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.adminMangas,(e=>((0,t.wg)(),(0,t.iD)("form",{class:"adminRow",ref_for:!0,ref:"form",key:e.id,onChange:n=>s.updateManga(e,n),method:"post"},[(0,t.wy)((0,t._)("input",{class:"adminText",type:"text","onUpdate:modelValue":n=>e.name=n},null,8,J),[[r.nr,e.name]]),(0,t.wy)((0,t._)("input",{class:"adminUrl",type:"text","onUpdate:modelValue":n=>e.url=n},null,8,X),[[r.nr,e.url]]),(0,t.wy)((0,t._)("input",{class:"adminOrder",type:"number",min:"0","onUpdate:modelValue":n=>e.order=n},null,8,Q),[[r.nr,e.order]]),(0,t._)("input",{type:"submit",onClick:n=>s.deleteManga(e,n),value:"X"},null,8,ee)],40,G)))),128))],512),[[r.F8,o.adminToggle]])],64)}var ae={name:"AdminPage",props:["adminMangas"],data(){return{adminToggle:!1}},methods:{updateManga(e,n){this.emitter.emit("update-manga",e,n)},deleteManga(e,n){this.emitter.emit("delete-manga",e,n)}}};const re=(0,f.Z)(ae,[["render",ne]]);var te=re;const ie={key:0,class:"box error-box"},oe={key:0},se=(0,t._)("b",null,"Please correct the following error(s):",-1),le={class:"error-header"},de={class:"error-body"},ue=(0,t._)("strong",null,"Request:",-1),ge=(0,t._)("br",null,null,-1),me=(0,t._)("br",null,null,-1);function he(e,n,a,r,i,o){return a.error?((0,t.wg)(),(0,t.iD)("div",ie,[a.errors.length?((0,t.wg)(),(0,t.iD)("p",oe,[se,(0,t._)("ul",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.errors,(e=>((0,t.wg)(),(0,t.iD)("li",{key:e.id},(0,d.zw)(e),1)))),128))])])):(0,t.kq)("",!0),(0,t._)("div",le,"Error "+(0,d.zw)(a.error.status)+": "+(0,d.zw)(a.error.statusText),1),(0,t._)("div",de,[ue,ge,(0,t.Uk)(" - Method: "+(0,d.zw)(a.error.method)+" ",1),me,(0,t.Uk)(" - URL: "+(0,d.zw)(a.error.url),1)])])):(0,t.kq)("",!0)}var ce={name:"ErrorPage",props:["error","errors"]};const pe=(0,f.Z)(ce,[["render",he]]);var fe=pe,Me={name:"MangaManager",components:{AuthPage:w,MangaBox:V,HiddenMangas:R,AdminPage:te,ErrorPage:fe},data(){return{loading:!1,isUserLoggedIn:!1,pageNumTimer:[],adminTimer:[],newMangaText:"",listOfManga:[],err:null,errors:[],updateMangaName:null,updateMangaUrl:null,updateMangaOrder:null,testObject:{}}},computed:{notHiddenMangas:function(){return this.listOfManga.filter((e=>!1===e.hidden))},hiddenMangas:function(){return this.listOfManga.filter((e=>!0===e.hidden))},orderedNotHiddenMangas:function(){return this.notHiddenMangas.slice(0).sort(((e,n)=>e.order-n.order))},orderedHiddenMangas:function(){return this.hiddenMangas.slice(0).sort(((e,n)=>e.order-n.order))},orderedMangas:function(){return this.listOfManga.slice().sort(((e,n)=>e.order-n.order))}},mounted:function(){l("/api/mangas","GET").then((e=>{const n=[];for(let a of e)a.editedUrl=a.url.replace("%%N%%",a.pageNum+1),a.nextUrl=a.url.replace("%%N%%",a.pageNum+1),a.hasNext=!1,n.push({id:a.id,url:a.nextUrl});this.listOfManga=e,this.loading=!0,l("/api/nextChapterChecker","POST",{mangas:n}).then((e=>{for(let{id:n,value:a}of e.results){const e=this.listOfManga.find((e=>e.id===n));e&&(e.hasNext=a)}this.loading=!1})),this.isUserLoggedIn=!0})).catch((e=>{console.log("errrrr->",e),this.err=e,this.isUserLoggedIn=!1,l("/auth/cleanUpExpiredSessions","GET")})),this.emitter.on("add-new-manga",(e=>this.addNewManga(e))),this.emitter.on("hide-manga",((e,n)=>this.hideManga(e,n))),this.emitter.on("modify-manga-page-number",((e,n)=>this.modifyMangaPageNumber(e,n))),this.emitter.on("update-manga",((e,n)=>this.updateManga(e,n))),this.emitter.on("delete-manga",((e,n)=>this.deleteManga(e,n)))},beforeUnmount(){this.emitter.off("add-new-manga"),this.emitter.off("hide-manga"),this.emitter.off("modify-manga-page-number"),this.emitter.off("update-manga"),this.emitter.off("delete-manga")},methods:{yourlink(){[...document.querySelectorAll(".star > a")].forEach(((e,n,a)=>{window.open(e.href)}))},modifyMangaPageNumber:function(e,n){n&&n.preventDefault(),clearTimeout(this.pageNumTimer[e.id]),this.pageNumTimer[e.id]=setTimeout((()=>{this.error=null,console.log(`/api/manga/page/${e.id}`),l("/api/manga/page/"+e.id,"PATCH",{pageNum:e.pageNum}).then((e=>{console.log(e)})).catch((e=>this.error=e))}),2500)},addNewManga:function(e){e.preventDefault(),this.errors=[],this.mangaName||this.errors.push("Manga name required."),this.mangaUrl||this.errors.push("Manga url required."),l("/api/manga","POST",{name:this.mangaName,url:this.mangaUrl}).then((e=>this.listOfManga.push(e))).catch((e=>this.error=e))},updateManga:function(e,n){n&&n.preventDefault(),clearTimeout(this.adminTimer[e.id]),this.errors=[],e.name||this.errors.push("Manga name required."),e.url||this.errors.push("Manga url required."),e.order||this.errors.push("Manga order required."),this.adminTimer[e.id]=setTimeout((()=>{this.error=null,l(`/api/manga/admin/edit/${e.id}`,"PATCH",{name:e.name,url:e.url,order:e.order}).then((e=>{console.log(e)})).catch((e=>this.error=e))}),2500)},hideManga:function(e,n){n&&n.preventDefault(),this.error=null,l("/api/manga/hide/"+e.id,"POST").then((()=>{const n=this.listOfManga.indexOf(e);this.listOfManga[n].hidden=!this.listOfManga[n].hidden})).catch((e=>{this.error=e}))},deleteManga:function(e,n){n&&n.preventDefault(),this.error=null,confirm("Do you really want to delete?")&&l(`/api/manga/delete/${e.id}`,"DELETE").then((()=>{this.listOfManga.splice(this.listOfManga.indexOf(e),1)})).catch((e=>{this.error=e}))}}};const we=(0,f.Z)(Me,[["render",s]]);var ve=we,ye={name:"App",components:{MangaManager:ve}};const be=(0,f.Z)(ye,[["render",i]]);var _e=be,ke=a(1373);const Ne=(0,ke.Z)(),Ue=(0,r.ri)(_e);Ue.config.globalProperties.emitter=Ne,Ue.mount("#app")}},n={};function a(r){var t=n[r];if(void 0!==t)return t.exports;var i=n[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(n,r,t,i){if(!r){var o=1/0;for(u=0;u<e.length;u++){r=e[u][0],t=e[u][1],i=e[u][2];for(var s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var d=t();void 0!==d&&(n=d)}}return n}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,t,i]}}(),function(){a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,{a:n}),n}}(),function(){a.d=function(e,n){for(var r in n)a.o(n,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={143:0};a.O.j=function(n){return 0===e[n]};var n=function(n,r){var t,i,o=r[0],s=r[1],l=r[2],d=0;if(o.some((function(n){return 0!==e[n]}))){for(t in s)a.o(s,t)&&(a.m[t]=s[t]);if(l)var u=l(a)}for(n&&n(r);d<o.length;d++)i=o[d],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(8356)}));r=a.O(r)})();
//# sourceMappingURL=app.48bfaacc.js.map